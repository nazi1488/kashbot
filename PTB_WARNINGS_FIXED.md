# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π PTB ConversationHandler

## üö® –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –ø–æ—è–≤–ª—è–ª–∏—Å—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
```
PTBUserWarning: If 'per_message=False', 'CallbackQueryHandler' will not be tracked for every message.
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `per_message=True` –∫–æ –≤—Å–µ–º ConversationHandler'–∞–º.

## üìã –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `main.py`
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 6 ConversationHandler'–æ–≤:

- **–°—Ç—Ä–æ–∫–∞ 201** - `broadcast_conv` (–∞–¥–º–∏–Ω —Ä–∞—Å—Å—ã–ª–∫–∞)
- **–°—Ç—Ä–æ–∫–∞ 225** - `cookies_conv` (–∞–¥–º–∏–Ω –∫—É–∫–∏)  
- **–°—Ç—Ä–æ–∫–∞ 252** - `conv_handler` (—É–Ω–∏–∫–∞–ª–∏–∑–∞—Ü–∏—è)
- **–°—Ç—Ä–æ–∫–∞ 278** - `hide_text_conv` (—Å–∫—Ä—ã—Ç–∏–µ —Ç–µ–∫—Å—Ç–∞)
- **–°—Ç—Ä–æ–∫–∞ 297** - `compress_conv` (—É–º–Ω–æ–µ —Å–∂–∞—Ç–∏–µ)
- **–°—Ç—Ä–æ–∫–∞ 325** - `video_download_conv` (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ)

### 2. `features/keitaro/handlers.py`
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 1 ConversationHandler:

- **–°—Ç—Ä–æ–∫–∞ 524** - `conv_handler` (Keitaro –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)

## üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ë—ã–ª–æ:**
```python
ConversationHandler(
    # ...
    per_user=True,
    per_chat=True  # –∏–ª–∏ –±–µ–∑ per_chat
)
```

**–°—Ç–∞–ª–æ:**
```python
ConversationHandler(
    # ...
    per_user=True,
    per_chat=True,  # –∏–ª–∏ –±–µ–∑ per_chat
    per_message=True  # ‚Üê –î–û–ë–ê–í–õ–ï–ù–û
)
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ **–£–±—Ä–∞–Ω—ã –≤—Å–µ PTB –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è**
- ‚úÖ **CallbackQueryHandler —Ç–µ–ø–µ—Ä—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è**
- ‚úÖ **–ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π ConversationHandler**
- ‚úÖ **–ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç best practices PTB**

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ü–∞—Ä–∞–º–µ—Ç—Ä `per_message=True` —É–∫–∞–∑—ã–≤–∞–µ—Ç PTB –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ ConversationHandler –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/—á–∞—Ç–∞. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è CallbackQueryHandler'–æ–≤ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö ConversationHandler.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ callback'–æ–≤
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º PTB

---
*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã: 2025-09-29*  
*–í—Å–µ PTB –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã* ‚úÖ
