#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–π –±–æ—Ç–∞
"""

import sys
import json
from pathlib import Path

sys.path.insert(0, str(Path(__file__).parent))

def test_functions_improvements():
    """–ü—Ä–æ–≤–µ—Ä—è–µ–º —É–ª—É—á—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –±–æ—Ç–∞"""
    
    print("üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–π")
    print("=" * 50)
    
    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
        with open('locales/ru.json', 'r', encoding='utf-8') as f:
            locales = json.load(f)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–µ —Ç–µ–∫—Å—Ç—ã "–ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∏–ª–∏ –º–µ–Ω—é"
        texts_to_check = [
            'uniqueness_more_or_menu',
            'hide_text_more_or_menu', 
            'compress_more_or_menu'
        ]
        
        for text_key in texts_to_check:
            if text_key in locales:
                print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç {text_key}")
            else:
                print(f"‚ùå –¢–µ–∫—Å—Ç {text_key} –Ω–µ –Ω–∞–π–¥–µ–Ω")
                return False
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–º–ø–æ—Ä—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π
        from handlers.uniqizer import uniqueness_tool_callback, wrong_media_handler, process_media_file
        print("‚úÖ –£–Ω–∏–∫–∞–ª–∏–∑–∞—Ç–æ—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫")
        
        from handlers.compressor import smart_compress_callback, wrong_media_handler_compress, process_compression_task
        print("‚úÖ –ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∂–∞—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤)")
        
        from handlers.text_hider import hide_text_callback, text_handler
        print("‚úÖ –°–∫—Ä—ã—Ç–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫")
        
        print("\nüìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:")
        print("   1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∂–∞—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä")
        print("   2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è '–ø–æ–≤—Ç–æ—Ä–∏—Ç—å' –≤ —É–Ω–∏–∫–∞–ª–∏–∑–∞—Ç–æ—Ä")
        print("   3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ–∫—Å—Ç—ã –≤ —Å–∫—Ä—ã—Ç–∏–∏ —Ç–µ–∫—Å—Ç–∞")
        print("   4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ–∫—Å—Ç—ã –≤ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–µ")
        
        print("\nüéØ –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:")
        print("   –£–ù–ò–ö–ê–õ–ò–ó–ê–¢–û–†:")
        print("   ‚Ä¢ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∂–∞—Ç—ã–µ –≤–∏–¥–µ–æ/—Ñ–æ—Ç–æ (–∫–∞–∫ –≤—Å–µ–≥–¥–∞)")
        print("   ‚Ä¢ –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏: '–£–Ω–∏–∫–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ—â–µ?' ‚Üí [–£–Ω–∏–∫–∞–ª–∏–∑–∞—Ç–æ—Ä] [–ú–µ–Ω—é]")
        
        print("\n   –ö–û–ú–ü–†–ï–°–°–û–†:")
        print("   ‚Ä¢ –ù–û–í–û–ï: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∂–∞—Ç—ã–µ –≤–∏–¥–µ–æ/—Ñ–æ—Ç–æ —Å —Å–æ–≤–µ—Ç–æ–º")
        print("   ‚Ä¢ –ü–æ—Å–ª–µ —Å–∂–∞—Ç–∏—è: '–°–∂–∞—Ç—å –µ—â–µ —Ñ–∞–π–ª—ã?' ‚Üí [–£–º–Ω–æ–µ —Å–∂–∞—Ç–∏–µ] [–ú–µ–Ω—é]")
        
        print("\n   –°–ö–†–´–¢–ò–ï –¢–ï–ö–°–¢–ê:")
        print("   ‚Ä¢ –ü–æ—Å–ª–µ —Å–∫—Ä—ã—Ç–∏—è: '–°–∫—Ä—ã—Ç—å –µ—â–µ —Ç–µ–∫—Å—Ç?' ‚Üí [–°–∫—Ä—ã—Ç—å —Ç–µ–∫—Å—Ç] [–ú–µ–Ω—é]")
        
        print("\nüí° UX —É–ª—É—á—à–µ–Ω–∏—è:")
        print("   ‚Ä¢ –ö–∞–∫ –≤ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –≤–∏–¥–µ–æ - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å")
        print("   ‚Ä¢ –ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∂–∞—Ç—ã–µ —Ñ–∞–π–ª—ã —Å —Å–æ–≤–µ—Ç–æ–º")
        print("   ‚Ä¢ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–æ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö")
        
        return True
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: {e}")
        import traceback
        traceback.print_exc()
        return False

if __name__ == "__main__":
    success = test_functions_improvements()
    
    if success:
        print("\n" + "=" * 50)
        print("üéâ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–ª—É—á—à–µ–Ω—ã!")
        print("\nüí° –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:")
        print("   ‚Ä¢ –ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∂–∞—Ç—ã–µ —Ñ–∞–π–ª—ã")
        print("   ‚Ä¢ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ")
        print("   ‚Ä¢ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç")
        print("   ‚Ä¢ –ë–æ–ª—å—à–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –≤ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ")
    
    sys.exit(0 if success else 1)
