#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–∂–∞—Ç—ã—Ö –º–µ–¥–∏–∞ –≤ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–µ
"""

import sys
from pathlib import Path

sys.path.insert(0, str(Path(__file__).parent))

def test_compressor_media_support():
    """–ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∂–∞—Ç—ã–µ –º–µ–¥–∏–∞"""
    
    print("üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–∂–∞—Ç—ã—Ö –º–µ–¥–∏–∞ –≤ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–µ")
    print("=" * 50)
    
    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–∏
        from handlers.compressor import wrong_media_handler_compress
        print("‚úÖ –§—É–Ω–∫—Ü–∏—è wrong_media_handler_compress –Ω–∞–π–¥–µ–Ω–∞")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è async
        import asyncio
        if asyncio.iscoroutinefunction(wrong_media_handler_compress):
            print("‚úÖ wrong_media_handler_compress —è–≤–ª—è–µ—Ç—Å—è async —Ñ—É–Ω–∫—Ü–∏–µ–π")
        else:
            print("‚ùå wrong_media_handler_compress –ù–ï async")
            return False
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–º–ø–æ—Ä—Ç –∏–∑ handlers
        from handlers import wrong_media_handler_compress as imported_func
        print("‚úÖ –§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ handlers")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–º–ø–æ—Ä—Ç –≤ main.py
        try:
            import main
            print("‚úÖ main.py –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫")
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ main.py: {e}")
            return False
        
        print("\nüìã –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä:")
        print("   1. ‚úÖ –§—É–Ω–∫—Ü–∏—è wrong_media_handler_compress")
        print("   2. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∂–∞—Ç—ã—Ö –≤–∏–¥–µ–æ –∏ —Ñ–æ—Ç–æ") 
        print("   3. ‚úÖ –°–æ–≤–µ—Ç –æ –∫–∞—á–µ—Å—Ç–≤–µ —Ñ–∞–π–ª–æ–≤")
        print("   4. ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ ConversationHandler")
        
        print("\nüéØ –¢–µ–ø–µ—Ä—å –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —É–Ω–∏–∫–∞–ª–∏–∑–∞—Ç–æ—Ä:")
        print("   ‚Ä¢ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±—ã–µ –º–µ–¥–∏–∞ (—Ñ–∞–π–ª—ã –∏ —Å–∂–∞—Ç—ã–µ)")
        print("   ‚Ä¢ –î–∞–µ—Ç —Å–æ–≤–µ—Ç –æ –∫–∞—á–µ—Å—Ç–≤–µ")
        print("   ‚Ä¢ –ù–µ —Ç–µ—Ä—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
        print("   ‚Ä¢ –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ")
        
        print("\n‚ö° –°—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:")
        print("   1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –£–º–Ω–æ–µ —Å–∂–∞—Ç–∏–µ ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∂–∞—Ç–æ–µ –≤–∏–¥–µ–æ")
        print("   2. –ë–æ—Ç: '–í–∏–¥–µ–æ –ø—Ä–∏–Ω—è—Ç–æ! –°–æ–≤–µ—Ç: –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –∫–∞–∫ —Ñ–∞–π–ª'")
        print("   3. –ë–æ—Ç: —Å–∂–∏–º–∞–µ—Ç –≤–∏–¥–µ–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç")
        print("   4. –ë–æ—Ç: '–°–∂–∞—Ç—å –µ—â–µ —Ñ–∞–π–ª—ã?' ‚Üí [–£–º–Ω–æ–µ —Å–∂–∞—Ç–∏–µ] [–ú–µ–Ω—é]")
        
        return True
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: {e}")
        import traceback
        traceback.print_exc()
        return False

if __name__ == "__main__":
    success = test_compressor_media_support()
    
    if success:
        print("\n" + "=" * 50)
        print("üéâ –ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∂–∞—Ç—ã–µ –º–µ–¥–∏–∞!")
        print("\nüí° –†–µ–∑—É–ª—å—Ç–∞—Ç:")
        print("   ‚Ä¢ –ö–∞–∫ –≤ —É–Ω–∏–∫–∞–ª–∏–∑–∞—Ç–æ—Ä–µ - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±—ã–µ –º–µ–¥–∏–∞")
        print("   ‚Ä¢ –î–∞–µ—Ç –æ–±—É—á–∞—é—â–∏–µ —Å–æ–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º")
        print("   ‚Ä¢ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π UX –≤–æ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö")
        print("   ‚Ä¢ –ù–µ —Ç–µ—Ä—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞")
    
    sys.exit(0 if success else 1)
