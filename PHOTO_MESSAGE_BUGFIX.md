# üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "There is no text in the message to edit"

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Random Face Generator –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
BadRequest: There is no text in the message to edit
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "üîÅ –ï—â—ë –æ–¥–Ω–æ" –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–æ—Ç–æ, –±–æ—Ç –ø—ã—Ç–∞–ª—Å—è –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ-—Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ, —á—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤ Telegram API.

## üîß –†–µ—à–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥ (–¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
```python
# –í—Å–µ–≥–¥–∞ –ø—ã—Ç–∞–ª—Å—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ —Ç–µ–∫—Å—Ç
await query.edit_message_text(text=loading_text)
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥:
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
if query.message.text:
    # –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - –º–æ–∂–µ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
    await query.edit_message_text(text=loading_text)
else:
    # –§–æ—Ç–æ/–º–µ–¥–∏–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ
    loading_message = await query.message.reply_text(text=loading_text)
    context.user_data['loading_message'] = loading_message
```

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `edit_message_text`
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ-—Å–æ–æ–±—â–µ–Ω–∏–π** - –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `reply_text`
3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∑–∞–≥—Ä—É–∑–∫–∏** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
5. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** - —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–∏ –ª—é–±—ã—Ö —Å–±–æ—è—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã–µ —Ç–µ—Å—Ç–∞–º–∏:
- ‚úÖ Callback –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ (–≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
- ‚úÖ Callback –Ω–∞ —Ñ–æ—Ç–æ-—Å–æ–æ–±—â–µ–Ω–∏–∏ (–ø–æ—Å–ª–µ —Ñ–æ—Ç–æ ‚Üí "–ï—â—ë –æ–¥–Ω–æ")
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–∞—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
```
üìù –¢–µ—Å—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è: ‚úÖ –ü–†–û–ô–î–ï–ù
üì∑ –¢–µ—Å—Ç —Ñ–æ—Ç–æ-—Å–æ–æ–±—â–µ–Ω–∏—è: ‚úÖ –ü–†–û–ô–î–ï–ù  
‚ö†Ô∏è –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫: ‚úÖ –ü–†–û–ô–î–ï–ù
```

## üéØ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ñ–æ—Ç–æ –ª–∏—Ü–∞
2. –ù–∞–∂–∏–º–∞–µ—Ç "üîÅ –ï—â—ë –æ–¥–Ω–æ"
3. ‚ùå –ü–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É "BadRequest"
4. ‚ùå –§—É–Ω–∫—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ñ–æ—Ç–æ –ª–∏—Ü–∞
2. –ù–∞–∂–∏–º–∞–µ—Ç "üîÅ –ï—â—ë –æ–¥–Ω–æ"
3. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤–æ–µ –ª–∏—Ü–æ..."
4. ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤–æ–µ —Ñ–æ—Ç–æ
5. ‚úÖ –ú–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ (–≤ —Ä–∞–º–∫–∞—Ö –∫–≤–æ—Ç—ã)

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:
```python
if query.message.text:
    # –£ —Å–æ–æ–±—â–µ–Ω–∏—è –µ—Å—Ç—å —Ç–µ–∫—Å—Ç
else:
    # –°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ–¥–∏–∞ (—Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –¥–æ–∫—É–º–µ–Ω—Ç)
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º:
- –°–æ–æ–±—â–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `context.user_data['loading_message']`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ –∏–ª–∏ –æ—à–∏–±–∫–∏
- Graceful cleanup –ø—Ä–∏ –ª—é–±—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏—è—Ö

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- –°—Ç–∞—Ä—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- –ù–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ–¥–∏–∞-—Å–æ–æ–±—â–µ–Ω–∏–π
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏ –±–æ—Ç–∞

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞:
1. –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª `features/random_face/handlers.py`
2. –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è –∫ —Å–ª–µ–¥—É—é—â–∏–º –∑–∞–ø—Ä–æ—Å–∞–º
3. –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö –±–æ–ª—å—à–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
BadRequest: There is no text in the message to edit
```

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –±—É–¥—É—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
```
Successfully sent random face to user 12345
Could not delete loading message: <warning>
```

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ñ–æ—Ç–æ-—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ Random Face Generator, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É —Ñ—É–Ω–∫—Ü–∏–∏ "üîÅ –ï—â—ë –æ–¥–Ω–æ" –∏ —É–ª—É—á—à–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç.
